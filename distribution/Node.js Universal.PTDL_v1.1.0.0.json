{
  "meta": {
    "version": "PTDL_v1",
    "update_url": "https://raw.githubusercontent.com/amethyst-studio/pterodactyl-nest/main/distribution/node.json"
  },
  "name": "Node.js Universal",
  "description": "Universal nest egg for Node.js applications.",
  "version": "1.0.0",
  "features": null,
  "images": [
    "ghcr.io/parkervcp/yolks:nodejs_16",
    "ghcr.io/parkervcp/yolks:nodejs_15",
    "ghcr.io/parkervcp/yolks:nodejs_14",
    "ghcr.io/parkervcp/yolks:nodejs_12"
  ],
  "file_denylist": [],
  "startup": "if [ -d .git ]&&[ \"${UPDATE}\" == \"1\" ];then git stash;git stash drop;git pull;fi;npm install --production;node --max-old-space-size={{SERVER_MEMORY}} {{SCRIPT}}",
  "config": {
    "files": "{}",
    "startup": "{\"done\":\"[Pterodactyl] We are ready.\"}",
    "logs": "{}",
    "stop": "^^C"
  },
  "scripts": {
    "installation": {
      "script": "echo \"[Pterodactyl::EGG] Configuring Node.js Universal...\";apt update;apt install -y git make gcc g++ python python-dev libtool;mkdir -p /mnt/server/;cd /mnt/server/||exit 1;if [ \"${UPDATE}\" == \"false\" ]||[ \"${UPDATE}\" == \"0\" ];then echo -e \"We will assume you are aware what you are doing and will deploy all required files manually. Use 'Update via Git' as '1' if you wish to update automatically.\";exit 0;fi;if [[ ${GIT_REMOTE} != *.git ]];then GIT_REMOTE=${GIT_REMOTE}.git;fi;if [ -z \"${GIT_USERNAME}\" ]&&[ -z \"${GIT_ACCESS_TOKEN}\" ];then echo \"Git username and password are required to update via Git.\";exit 1;else GIT_REMOTE=https://${GIT_USERNAME}:${GIT_ACCESS_TOKEN}@$(echo -e \"${GIT_REMOTE}\"|cut -d/ -f3-);fi;if [ \"$(ls -A /mnt/server)\" ];then echo \"This directory '/mnt/server' already exists. Validating status.\";if [ -d .git ];then echo \"Directory '/mnt/server' is compatible with updater.\";if [ -f .git/config ];then echo -e \"Directory has '.git/config'\";ORIGIN=$(git config --get remote.origin.url);else echo -e \"Directory does not have '.git/config'\";echo -e \"Exiting to prevent accidental damage. Please validate the clone or reinstall your server.\";exit 1;fi;fi;if [ \"${ORIGIN}\" == \"${GIT_REMOTE}\" ];then echo \"Git origin is correct. Pulling latest changes.\";git pull;fi;else echo \"Directory '/mnt/server' does not exist. Cloning latest version of remote application.\";if [ -z \"${GIT_BRANCH}\" ];then echo -e \"Cloning default branch.\";git config --global user.email ptero@mxsrv.amethyst.live;git config --global user.name Pterodactyl Panel Automation;git clone \"${GIT_REMOTE}\" .;else echo -e \"Cloning ${GIT_BRANCH} branch.\";git config --global user.email ptero@mxsrv.amethyst.live;git config --global user.name Pterodactyl Panel Automation;git clone --single-branch --branch \"${GIT_BRANCH}\" \"${GIT_ADDRESS}\" .;fi;fi;if [ -f /mnt/server/package.json ];then /usr/local/bin/npm install --production;else echo \"Application does not have a package.json file. Skipping installation.\";exit 0;fi;echo \"Installation has been successfully completed. Please validate the application and begin using your service.\";exit 0",
      "container": "node:14-buster-slim",
      "entrypoint": "bash"
    }
  },
  "variables": [
    {
      "name": "Main Script",
      "description": "The name of the file to be executed with Node.js runtime. This is specific to your project, usually being './index.js' as the file.",
      "env_variable": "SCRIPT",
      "default_value": "./index.js",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|string|max:512"
    },
    {
      "name": "Update via Git",
      "description": "If the runtime should attempt to automatically update your project by doing a hard clone of your remote. Local modifications will be lost on each startup.",
      "env_variable": "UPDATE",
      "default_value": "0",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|boolean"
    },
    {
      "name": "Git Remote",
      "description": "The URL of upstream git host to clone from for 'Update via Git'.",
      "env_variable": "GIT_REMOTE",
      "default_value": "",
      "user_viewable": true,
      "user_editable": true,
      "rules": "string|max:512"
    },
    {
      "name": "Username",
      "description": "The username to access the upstream git host.",
      "env_variable": "GIT_USERNAME",
      "default_value": "",
      "user_viewable": true,
      "user_editable": true,
      "rules": "string|max:64"
    },
    {
      "name": "Access Token",
      "description": "The access token to access the upstream git host. You can use your password, but we greatly recommend access token if available.",
      "env_variable": "GIT_ACCESS_TOKEN",
      "default_value": "",
      "user_viewable": true,
      "user_editable": true,
      "rules": "string|max:256"
    }
  ],
  "_comment": "DO NOT EDIT: FILE GENERATED AUTOMATICALLY BY PTERODACTYL PANEL - PTERODACTYL.IO",
  "exported_at": "2021-08-22T13:40:46.721Z",
  "author": "postmaster@mxsrv.amethyst.live"
}